<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>keilä½¿ç”¨</title>
    <url>/2024/09/16/keil%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="æ¦‚è¿°-æ¥è‡ªæœç´¢">æ¦‚è¿°(æ¥è‡ªæœç´¢)</h2>
<p>Keilæä¾›äº†åŒ…æ‹¬Cç¼–è¯‘å™¨ã€å®æ±‡ç¼–ã€é“¾æ¥å™¨ã€åº“ç®¡ç†å’Œä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ä»¿çœŸè°ƒè¯•å™¨ç­‰åœ¨å†…çš„å®Œæ•´å¼€å‘æ–¹æ¡ˆï¼Œé€šè¿‡ä¸€ä¸ªé›†æˆå¼€å‘ç¯å¢ƒï¼ˆÎ¼Visionï¼‰å°†è¿™äº›éƒ¨åˆ†ç»„åˆåœ¨ä¸€èµ·ã€‚</p>
<h2 id="keilæ–°å»ºå·¥ç¨‹ï¼ˆåŸºäºæ ‡å‡†åº“ï¼‰">keilæ–°å»ºå·¥ç¨‹ï¼ˆåŸºäºæ ‡å‡†åº“ï¼‰</h2>
<p><a href="https://blog.csdn.net/EleganceJiaBao/article/details/141092467">keilå·¥ç¨‹æ–‡ä»¶</a><br>
<a href="https://blog.csdn.net/MQ0522/article/details/121818240">STM32å®˜æ–¹å›ºä»¶åº“ï¼ˆæ ‡å‡†å¤–è®¾åº“ä¸‹è½½)</a><br>
<img src="/images/uav/keil_1.png" alt="Test"><br>
keil.armå®˜ç½‘CMSIS PACKS<br>
<img src="/images/uav/keil_2.png" alt="Test"><br>
<a href="https://blog.csdn.net/lnfiniteloop/article/details/134943893?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522B3185469-384D-496E-BBE1-4C414176F11F%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=B3185469-384D-496E-BBE1-4C414176F11F&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-134943893-null-null.142%5Ev100%5Epc_search_result_base9&amp;utm_term=keil%E6%96%B0%E5%BB%BAstm32%E5%B7%A5%E7%A8%8B&amp;spm=1018.2226.3001.4187">æ–°å»ºå·¥ç¨‹</a></p>
<ol>
<li>Projectâ†’<strong>create new project</strong>ï¼Œé€‰æ‹©èŠ¯ç‰‡å‹å·<br>
<img src="/images/uav/keil_3.png" alt="Test"></li>
<li><strong>æ–°å»ºæ–‡ä»¶å¤¹â€”â€”ç§»æ¤æ ‡å‡†å¤–è®¾åº“</strong></li>
</ol>
<p>ProjectName/<br>
â”œâ”€â”€ ProjectName.uvprojx         # é¡¹ç›®é…ç½®æ–‡ä»¶<br>
â”œâ”€â”€ ProjectName.uvoptx          # ç”¨æˆ·é€‰é¡¹é…ç½®æ–‡ä»¶<br>
â”œâ”€â”€ Start/                    # å¯åŠ¨æ–‡ä»¶å¤¹<br>
â”‚   â”œâ”€â”€ startup.s               # å¯åŠ¨æ±‡ç¼–ä»£ç <br>
â”‚   â”œâ”€â”€ stm32f4xx.h             # STM32F4 ç³»åˆ—å¾®æ§åˆ¶å™¨å¤´æ–‡ä»¶<br>
â”‚   â”œâ”€â”€ system_stm32f4xx.h      # ç³»ç»Ÿåˆå§‹åŒ–å¤´æ–‡ä»¶<br>
â”‚   â”œâ”€â”€ system_stm32f4xx.c      # ç³»ç»Ÿåˆå§‹åŒ–ä»£ç <br>
â”‚   â”œâ”€â”€ stm32f4xx_conf.h   #é…ç½®å’Œå®šä¹‰ç¡¬ä»¶å¤–è®¾çš„åˆå§‹åŒ–å‚æ•°<br>
â”‚   â”œâ”€â”€ stm32f4xx_it.c<br>
â”‚   â”œâ”€â”€ stm32f4xx_it.h<br>
â”‚   â”œâ”€â”€ CMSIS/Core/              # Cortex-M ç¡¬ä»¶æŠ½è±¡å±‚,CMSIS æ ¸å¿ƒæ–‡ä»¶<br>
â”‚   â”‚   â”œâ”€â”€ core_cm4.h<br>
â”‚   â”‚   â”œâ”€â”€ core_cmFunc.h<br>
â”‚   â”‚   â”œâ”€â”€ core_cmInstr.h<br>
â”‚   â”‚   â”œâ”€â”€ core_cmSimd.h<br>
â”œâ”€â”€ User/                     # æºæ–‡ä»¶å¤¹<br>
â”‚   â”œâ”€â”€ main.c                  # ä¸»ç¨‹åºå…¥å£<br>
â”œâ”€â”€ Hardware/                    # å¤–è®¾<br>
â”‚   â”œâ”€â”€ peripheral.c            # å¤–è®¾é©±åŠ¨å®ç°ä»£ç <br>
â”‚   â”œâ”€â”€ peripheral.h            # å¤–è®¾é©±åŠ¨å£°æ˜æ–‡ä»¶<br>
â”œâ”€â”€ Libraries/                  # åº“æ–‡ä»¶å¤¹<br>
â”‚   â”œâ”€â”€ STM32F4xx_StdPeriph_Driver/inc # STM32 æ ‡å‡†å¤–è®¾åº“<br>
â”‚   â”œâ”€â”€ STM32F4xx_StdPeriph_Driver/src</p>
<p><strong>ä»ä¸‹è½½çš„å›ºä»¶åº“å¤åˆ¶ç›¸åº”æ–‡ä»¶åˆ°å¯¹åº”æ–‡ä»¶å¤¹</strong></p>
<ul>
<li><strong>keilä¸­æ·»åŠ æ–‡ä»¶</strong><br>
<img src="/images/uav/keil_4.png" alt="Test"></li>
<li><strong>åŒ…å«ç›¸å…³æ–‡ä»¶è·¯å¾„</strong><br>
<img src="/images/uav/keil_5.png" alt="Test"><br>
<strong>é¢„å¤„ç†å®šä¹‰</strong><br>
éœ€è¦é€‰æ‹©ä½¿ç”¨çš„èŠ¯ç‰‡</li>
</ul>
<blockquote>
<p>å¯èƒ½çš„æŠ¥é”™</p>
<ol>
<li>fmcï¼Œfsmcç›¸å…³æ–‡ä»¶å†…å­˜åœ¨æœªå®šä¹‰å˜é‡åâ†’å¯èƒ½stm32f401ä¸æ”¯æŒï¼Œç›´æ¥åˆ å».c/.hæ–‡ä»¶</li>
<li>å¤´æ–‡ä»¶ä¸­å®šä¹‰äº†å¼•ç”¨äº†main.hï¼Œç”±äºç›´æ¥ä»ç¤ºä¾‹é¡¹ç›®ä¸­copyï¼Œæœ¬é¡¹ç›®æœªå»ºç«‹main.hï¼Œæ‰€ä»¥å°†è¯¥å¼•ç”¨æ³¨é‡Šæ‰å³å¯<br>
<img src="/images/uav/keil_6.png" alt="Test"></li>
</ol>
</blockquote>
<ol start="3">
<li>åšä¸ªç‚¹ç¯ï¼Œæ£€æµ‹ä¸€ä¸‹</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#include &quot;stm32f4xx.h&quot;</span><br><span class="line">#include &quot;stm32f4xx_rcc.h&quot;</span><br><span class="line">#include &quot;stm32f4xx_gpio.h&quot;</span><br><span class="line"></span><br><span class="line">void GPIO_INIT(void)&#123;</span><br><span class="line">        RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA,ENABLE);</span><br><span class="line"></span><br><span class="line">        GPIO_InitTypeDef GPIO_InitStructure;        </span><br><span class="line">        GPIO_InitStructure.GPIO_Pin = GPIO_Pin_5;</span><br><span class="line">        GPIO_InitStructure.GPIO_Mode =GPIO_Mode_OUT ; </span><br><span class="line">        GPIO_InitStructure.GPIO_Speed =GPIO_Speed_50MHz;</span><br><span class="line">        GPIO_InitStructure.GPIO_OType=GPIO_OType_PP;</span><br><span class="line">        GPIO_InitStructure.GPIO_PuPd=GPIO_PuPd_NOPULL;</span><br><span class="line">        GPIO_Init(GPIOA,&amp;GPIO_InitStructure);</span><br><span class="line">&#125;       </span><br><span class="line">int main (void)&#123;     </span><br><span class="line">        </span><br><span class="line">        GPIO_INIT();</span><br><span class="line">        </span><br><span class="line">        while(1)</span><br><span class="line">        &#123;</span><br><span class="line">                GPIO_SetBits(GPIOA,GPIO_Pin_5);</span><br><span class="line">                for (int i = 0; i &lt; 1000000; i++);</span><br><span class="line">                GPIO_ResetBits(GPIOA, GPIO_Pin_5);</span><br><span class="line">                for (int i = 0; i &lt; 1000000; i++);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="keilè°ƒè¯•">keilè°ƒè¯•</h2>
<p><a href="https://blog.csdn.net/ybhuangfugui/article/details/51706145">keilè°ƒè¯•</a></p>
<h2 id="é…ç½®ç›¸å…³">é…ç½®ç›¸å…³</h2>
<p><strong>Option for target</strong><br>
<a href="https://www.strongerhuang.com/Keil/Keil%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B05_%E5%B7%A5%E7%A8%8B%E7%9B%AE%E6%A0%87%E9%80%89%E9%A1%B9%E9%85%8D%E7%BD%AE%EF%BC%88%E4%B8%80%EF%BC%89.html">keilå·¥ç¨‹ç›®æ ‡é€‰é¡¹é…ç½®</a></p>
<blockquote>
<p>ä¸ªäººè§‰å¾—è¿™ä¸ªåšä¸»å…³äºkeilçš„ç³»åˆ—ä»‹ç»çš„å¾ˆè¯¦ç»†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸€çœ‹ï¼Œæˆ‘åªåœ¨è¿™é‡Œè®°å½•ä¸€äº›å¸¸ç”¨çš„é…ç½®ï¼Œä¸å¸¸ç”¨çš„ä¸å±•å¼€è¯´æ˜</p>
</blockquote>
<ul>
<li>Device<br>
<img src="/images/uav/keil_7.png" alt="Test"><br>
æ–°å»ºå·¥ç¨‹çš„æ—¶å€™<strong>é€‰æ‹©ä½¿ç”¨è®¾å¤‡</strong>ï¼ˆåœ¨æ­¤ä¹‹å‰éœ€è¦å»keil.armä¸‹è½½ç›¸å…³è®¾å¤‡çš„åŒ…ï¼‰</li>
<li>target<br>
<img src="/images/uav/keil_8.png" alt="Test"></li>
</ul>
<ol>
<li>Arm ç¼–è¯‘å™¨</li>
<li>åˆ†ä¸ºç‰‡å¤–å’Œç‰‡å†…<br>
<strong>ROM (Flash) åœ°å€</strong>ï¼šåœ¨ â€˜Read/Only Memory Areasâ€™ éƒ¨åˆ†ï¼Œä½ å¯ä»¥çœ‹åˆ° â€˜Startâ€™ å’Œ â€˜Sizeâ€™ å­—æ®µï¼Œè¿™é‡Œå¡«å…¥çš„æ˜¯ Flash å­˜å‚¨å™¨çš„èµ·å§‹åœ°å€å’Œå¤§å°ã€‚<br>
ç¨‹åºå­˜å‚¨åœ°å€<br>
<strong>RAM åœ°å€</strong>ï¼šåœ¨ â€˜Read/Write Memory Areasâ€™ éƒ¨åˆ†ï¼ŒåŒæ ·ä¼šæ˜¾ç¤º â€˜Startâ€™ å’Œ â€˜Sizeâ€™ å­—æ®µï¼Œç”¨äºè®¾ç½® RAM çš„èµ·å§‹åœ°å€å’Œå¤§å°ã€‚<br>
<img src="/images/uav/keil_9.png" alt="Test"><br>
<img src="/images/uav/keil_10.png" alt="Test"></li>
</ol>
<ul>
<li>Output<br>
<img src="/images/uav/keil_11.png" alt="Test"><br>
è¾“å‡ºå¯æ‰§è¡Œæ–‡ä»¶/åº“çš„åœ°å€ï¼Œä¿¡æ¯é…ç½®ï¼ˆåˆå­¦è€…ä¿æŒé»˜è®¤é€‰é¡¹å³å¯ï¼‰</li>
<li>Listing<br>
<img src="/images/uav/keil_12.png" alt="Test"><br>
ç”Ÿæˆåˆ—è¡¨ç›¸å…³é…ç½®</li>
<li>User<br>
<img src="/images/uav/keil_13.png" alt="Test"><br>
ç¼–è¾‘ä¹‹å‰/ç¼–è¯‘ä¹‹å‰/ç¼–è¯‘ä¹‹åæ‰§è¡Œçš„ç¨‹åº</li>
<li>C++<br>
<img src="/images/uav/keil_14.png" alt="Test"></li>
</ul>
<ol>
<li>Preprocessor symbolsé¢„å¤„ç†å®šä¹‰<br>
stm32f4xx.hæ–‡ä»¶ä¸­å³ä¸ç”¨å†å®šä¹‰ä½¿ç”¨èŠ¯ç‰‡</li>
<li>Language / Code Generation</li>
<li>Include path<br>
é¡¹ç›®æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹è·¯å¾„éƒ½åŒ…å«è¿›æ¥</li>
<li>Misc Controls å¤šåŠŸèƒ½æ§ä»¶</li>
<li>Compiler control string<br>
å¯¹ç¼–è¯‘å™¨æ‰§è¡Œçš„æŒ‡ä»¤</li>
</ol>
<ul>
<li>Asm<br>
<img src="/images/uav/keil_15.png" alt="Test"><br>
é’ˆå¯¹asmæ±‡ç¼–çš„é…ç½®ï¼Œä¸C/C++é…ç½®å†…å®¹ç›¸å¯¹åº”</li>
<li>Linkeré“¾æ¥å™¨é…ç½®<br>
<img src="/images/uav/keil_16.png" alt="Test"><br>
Use Memory Layout from Target Dialogå†…å­˜é…ç½®å¯¹è¯</li>
<li>Debug<br>
<img src="/images/uav/keil_17.png" alt="Test"></li>
<li>Utilities<br>
<img src="/images/uav/keil_18.png" alt="Test"><br>
Settingï¼šè®¾ç½®<br>
å¾ˆå¤šäººä¸‹è½½ç¨‹åºä¹‹åï¼Œéœ€è¦å¤ä½ä¸€ä¸‹ç¨‹åºæ‰è¿è¡Œï¼ŒåŸå› åœ¨äºæ²¡æœ‰å‹¾é€‰â€œReset and Runâ€<br>
<img src="/images/uav/keil_19.png" alt="Test"></li>
</ul>
]]></content>
      <categories>
        <category>å››è½´</category>
        <category>åµŒå…¥å¼å…¥é—¨</category>
      </categories>
      <tags>
        <tag>keil</tag>
        <tag>åµŒå…¥å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>test</title>
    <url>/2024/08/10/test/</url>
    <content><![CDATA[<h1>Hello World</h1>
<h2 id="æ¬¢è¿æ¥åˆ°åŸºåœ°ï¼">æ¬¢è¿æ¥åˆ°åŸºåœ°ï¼</h2>
<blockquote>
<p>ğŸ’¡ä¸‹é¢æ˜¯åŸºåœ°åˆ›å»ºè€…çš„å°å°å°è¯•</p>
</blockquote>
<h3 id="ä»£ç ">ä»£ç </h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;hello world&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="é“¾æ¥">é“¾æ¥</h3>
<p><a href="https://github.com/Hatty-z">github</a></p>
<p><strong>åŸºåœ°æ­å»ºèµ·æ¥å•¦ğŸ¥³ğŸ¥³ğŸ¥³</strong></p>
]]></content>
  </entry>
  <entry>
    <title>æ‰‹åŠ¿è¯†åˆ«æ¨¡å‹éƒ¨ç½²åœ¨esp32s3ï¼ˆä¸€ï¼‰</title>
    <url>/2024/09/17/%E6%89%8B%E5%8A%BF%E8%AF%86%E5%88%AB%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2%E5%9C%A8esp32s3%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1>æ¨¡å‹å¼€å‘</h1>
<h2 id="1-æ•°æ®">1. æ•°æ®</h2>
<ul>
<li>æ”¶é›†</li>
<li>åˆ’åˆ†æ•°æ®é›†ï¼ˆè®­ç»ƒé›†ï¼ŒéªŒè¯é›†ï¼Œæµ‹è¯•é›†ï¼‰</li>
<li>é¢„å¤„ç†<br>
<em>æé«˜æ•°æ®è´¨é‡ï¼Œæ¨¡å‹è®­ç»ƒæ•ˆæœ</em></li>
</ul>
<h2 id="2-æ¨¡å‹çš„é€‰æ‹©ä¸è®¾è®¡">2. æ¨¡å‹çš„é€‰æ‹©ä¸è®¾è®¡</h2>
<h2 id="3-æ¨¡å‹è®­ç»ƒï¼ŒéªŒè¯ä¸è°ƒä¼˜">3. æ¨¡å‹è®­ç»ƒï¼ŒéªŒè¯ä¸è°ƒä¼˜</h2>
<ul>
<li>ä½¿ç”¨è®­ç»ƒé›†è¿›è¡Œæ¨¡å‹è®­ç»ƒ</li>
<li>ä½¿ç”¨éªŒè¯é›†è¿›è¡Œæ¨¡å‹æ€§èƒ½è¯„ä¼°</li>
<li>è°ƒæ•´è¶…å‚æ•°ï¼ˆå­¦ä¹ ç‡ï¼Œæ‰¹æ¬¡å¤§å°ï¼Œè¿­ä»£æ¬¡æ•°ï¼‰<br>
<em>ç¡®ä¿æ¨¡å‹å…·æœ‰è‰¯å¥½çš„æ€§èƒ½ä¸æ³›åŒ–èƒ½åŠ›</em></li>
</ul>
<h2 id="4-æ¨¡å‹è¯„ä¼°">4. æ¨¡å‹è¯„ä¼°</h2>
<p>ä½¿ç”¨æµ‹è¯•é›†è¿›è¡Œæ¨¡å‹æ€§èƒ½è¯„ä¼°<br>
<strong>è¯„ä¼°æŒ‡æ ‡</strong>ï¼ˆå‡†ç¡®ç‡ï¼Œå¬å›ç‡ï¼ŒF1_scoreç­‰ï¼‰</p>
<h2 id="5-æ¨¡å‹ä¼˜åŒ–">5. æ¨¡å‹ä¼˜åŒ–</h2>
<ul>
<li><strong>æ¨¡å‹å‰ªæ</strong>ï¼šå‡å°‘æ¨¡å‹å‚æ•°ï¼Œå»é™¤å†—ä½™èŠ‚ç‚¹ï¼Œæé«˜æ¨ç†é€Ÿåº¦ã€‚</li>
<li><strong>æ¨¡å‹é‡åŒ–</strong>ï¼šå°†æ¨¡å‹ä»æµ®ç‚¹æ•°ç²¾åº¦é™ä½åˆ°å®šç‚¹æ•°ç²¾åº¦ï¼ˆå¦‚FP32åˆ°INT8ï¼‰ï¼Œå‡å°‘è®¡ç®—é‡å’Œå†…å­˜å ç”¨ã€‚</li>
</ul>
<blockquote>
<p>é‡åŒ–æ—¶é‡åˆ°ä¸¤ç§é‡åŒ–æ–¹æ³•é€‰æ‹©<br>
æŸ¥é˜…èµ„æ–™ï¼š<br>
ä¸¤ç§é‡åŒ–æ–¹å¼çš„æ¯”è¾ƒ<br>
(A) <strong>åŠ¨æ€é‡åŒ–</strong> (Dynamic Quantization)<br>
åŠ¨æ€é‡åŒ–åœ¨æ¨ç†è¿‡ç¨‹ä¸­å¯¹æ¿€æ´»å€¼ï¼ˆå¦‚æƒé‡å’Œä¸­é—´ç»“æœï¼‰è¿›è¡Œé‡åŒ–ã€‚è¿™æ„å‘³ç€æ¨¡å‹åœ¨æ¨ç†æ—¶ä¼šåŠ¨æ€åœ°å°†æŸäº›æµ®ç‚¹è¿ç®—è½¬æ¢ä¸ºæ•´æ•°è¿ç®—ï¼Œä»¥æé«˜æ¨ç†æ•ˆç‡ã€‚æ­¤æ–¹æ³•ä¸éœ€è¦æ ¡å‡†æ•°æ®é›†ï¼Œé€‚åˆä¸€äº›æ¨¡å‹åœ¨éƒ¨ç½²æ—¶ç®€åŒ–é‡åŒ–è¿‡ç¨‹ã€‚</p>
<ul>
<li>ä¼˜ç‚¹:
<ul>
<li>ä¸éœ€è¦æ ¡å‡†æ•°æ®é›†ï¼Œè¿‡ç¨‹è¾ƒä¸ºç®€å•ã€‚</li>
<li>å¯ä»¥ç«‹å³ç”¨äºå¤§éƒ¨åˆ†æ¨ç†ä»»åŠ¡ã€‚</li>
<li>é€šå¸¸ä¼šä¿ç•™æµ®ç‚¹ç²¾åº¦ï¼Œé€‚ç”¨äºå¤§éƒ¨åˆ†ä»»åŠ¡ã€‚</li>
</ul>
</li>
<li>ç¼ºç‚¹:
<ul>
<li>å¯¹ç¡¬ä»¶åŠ é€Ÿå™¨çš„æ”¯æŒä¸å¦‚é™æ€é‡åŒ–å¥½ã€‚</li>
<li>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œæ¨ç†é€Ÿåº¦çš„æå‡æœ‰é™ã€‚<br>
(B) <strong>é™æ€é‡åŒ–</strong> (Static Quantization)<br>
é™æ€é‡åŒ–éœ€è¦åœ¨æ¨ç†ä¹‹å‰å¯¹æ•´ä¸ªæ¨¡å‹è¿›è¡Œé‡åŒ–ã€‚å®ƒé€šå¸¸ä½¿ç”¨æ ¡å‡†æ•°æ®é›†æ¥ä¼°è®¡æ¨¡å‹çš„æ¿€æ´»èŒƒå›´ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºæ•´æ•°æ ¼å¼ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æ˜¾è‘—é™ä½æ¨¡å‹çš„å¤§å°å’Œè®¡ç®—å¤æ‚åº¦ï¼Œå¹¶ä¸”åœ¨ç¡¬ä»¶åŠ é€Ÿå™¨ï¼ˆå¦‚ESP32-S3ï¼‰ä¸Šè¡¨ç°æ›´å¥½ã€‚</li>
</ul>
</li>
<li>ä¼˜ç‚¹:
<ul>
<li>å¤§å¹…å‡å°‘æ¨¡å‹çš„å¤§å°å’Œè®¡ç®—æˆæœ¬ã€‚</li>
<li>åœ¨ç¡¬ä»¶åŠ é€Ÿå™¨ä¸Šçš„æ€§èƒ½ä¼˜åŒ–æ•ˆæœæ›´æ˜æ˜¾ã€‚</li>
<li>å¯ç”¨äºéƒ¨ç½²åœ¨èµ„æºå—é™çš„è®¾å¤‡ä¸Šï¼Œå¦‚å¾®æ§åˆ¶å™¨ã€‚</li>
</ul>
</li>
<li>ç¼ºç‚¹:
<ul>
<li>éœ€è¦ä¸€ä¸ªæ ¡å‡†æ•°æ®é›†ï¼Œæ­¥éª¤è¾ƒä¸ºå¤æ‚ã€‚<br>
- å¯èƒ½ä¼šå¯¼è‡´ç²¾åº¦ä¸‹é™ï¼Œå°¤å…¶æ˜¯åœ¨æ¨¡å‹å¯¹é‡åŒ–æ•æ„Ÿçš„æƒ…å†µä¸‹ã€‚</li>
</ul>
</li>
</ul>
<ol>
<li>å¦‚ä½•é€‰æ‹©<br>
- å¦‚æœä½ éœ€è¦ä¸€ä¸ªè¾ƒä¸ºç®€å•çš„é‡åŒ–è¿‡ç¨‹ï¼Œå¹¶ä¸”å¯¹æ€§èƒ½è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥é€‰æ‹©åŠ¨æ€é‡åŒ–ã€‚<br>
- å¦‚æœä½ å¸Œæœ›æœ€å¤§åŒ–æ¨¡å‹åœ¨ç¡¬ä»¶ä¸Šçš„æ€§èƒ½ï¼Œä¸”æœ‰æ ¡å‡†æ•°æ®é›†ï¼Œé‚£ä¹ˆé™æ€é‡åŒ–å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</li>
</ol>
</blockquote>
<ul>
<li><strong>è’¸é¦å­¦ä¹ </strong> ï¼šä½¿ç”¨ä¸€ä¸ªå¤§æ¨¡å‹ï¼ˆæ•™å¸ˆæ¨¡å‹ï¼‰æŒ‡å¯¼å°æ¨¡å‹ï¼ˆå­¦ç”Ÿæ¨¡å‹ï¼‰å­¦ä¹ ï¼Œæé«˜å°æ¨¡å‹çš„æ€§èƒ½ã€‚<br>
å‡å°‘æ¨¡å‹çš„è®¡ç®—é‡ä¸å†…å­˜å ç”¨ï¼Œæé«˜æ¨ç†é€Ÿåº¦ä¸éƒ¨ç½²æ•ˆç‡</li>
</ul>
<h2 id="6-æ¨¡å‹éƒ¨ç½²">6. æ¨¡å‹éƒ¨ç½²</h2>
<p>é€‰æ‹©åˆé€‚çš„<strong>æ¨ç†æ¡†æ¶</strong>ï¼ˆTensorFlow Lite, ONNX Runtimeç­‰ï¼‰</p>
<blockquote>
<p>æŸ¥é˜…TensorFlow Lite  &amp; ONNX Runtime<br>
<strong>å¹³å°å’Œå…¼å®¹æ€§</strong>ï¼š</p>
<ul>
<li>TensorFlow Liteï¼šä¸»è¦è®¾è®¡ç”¨äºç§»åŠ¨å’ŒåµŒå…¥å¼è®¾å¤‡ä¸Šï¼Œå¦‚Androidå’ŒiOSæ‰‹æœºã€‚å®ƒå¯¹TensorFlowç”Ÿæ€ç³»ç»Ÿæœ‰å¾ˆå¥½çš„æ”¯æŒã€‚</li>
<li>ONNX Runtimeï¼šæ”¯æŒå¤šç§å¹³å°ï¼ŒåŒ…æ‹¬Windowsã€Linuxã€MacOSä»¥åŠç§»åŠ¨è®¾å¤‡ã€‚å®ƒå¯ä»¥æ‰§è¡Œç”¨å¤šç§æ¡†æ¶è®­ç»ƒçš„æ¨¡å‹ï¼Œåªè¦è¿™äº›æ¨¡å‹è¢«è½¬æ¢æˆONNXæ ¼å¼ï¼Œå¦‚PyTorchã€TensorFlowã€Scikit-Learnç­‰ã€‚<br>
<strong>æ¨¡å‹è½¬æ¢å’Œæ”¯æŒ</strong>ï¼š</li>
<li>TensorFlow Liteï¼šéœ€è¦å°†TensorFlowæ¨¡å‹è½¬æ¢æˆTFLiteæ ¼å¼ã€‚è¿™ä¸€è¿‡ç¨‹å¯èƒ½æ¶‰åŠåˆ°åŠŸèƒ½çš„ç®€åŒ–æˆ–ä¿®æ”¹ï¼Œå› ä¸ºTFLiteä¸æ”¯æŒTensorFlowçš„å…¨éƒ¨æ“ä½œã€‚</li>
<li>ONNX Runtimeï¼šå¯ä»¥åŠ è½½ONNXæ ¼å¼çš„æ¨¡å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æ”¾çš„æ¨¡å‹æ ¼å¼ï¼Œæ”¯æŒå¤šç§æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚å¦‚æœä½ çš„æ¨¡å‹æ˜¯ç”¨PyTorchã€MXNetç­‰å…¶ä»–æ¡†æ¶è®­ç»ƒçš„ï¼ŒONNX Runtimeå¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚<br>
<strong>æ€§èƒ½å’Œä¼˜åŒ–</strong>ï¼š</li>
<li>TensorFlow Liteï¼šæä¾›äº†å¤šç§ä¼˜åŒ–é€‰é¡¹ï¼ŒåŒ…æ‹¬é‡åŒ–å’Œä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿï¼ˆå¦‚GPUå’ŒTPUï¼‰ã€‚</li>
<li>ONNX Runtimeï¼šä¹Ÿæä¾›ä¼˜åŒ–å’Œç¡¬ä»¶åŠ é€Ÿæ”¯æŒï¼ŒåŒ…æ‹¬ä½¿ç”¨NVIDIAçš„TensorRTã€Intelçš„DNNLç­‰ã€‚å®ƒçš„æ€§èƒ½ä¼˜åŒ–é€šå¸¸åœ¨æœåŠ¡å™¨å’Œäº‘ç¯å¢ƒä¸­è¡¨ç°æ›´ä¸ºçªå‡ºã€‚</li>
</ul>
</blockquote>
<h2 id="7-ç›‘æ§ä¸ç»´æŠ¤">7.  ç›‘æ§ä¸ç»´æŠ¤</h2>
<ul>
<li>å®æ—¶ç›‘æ§ï¼šç›‘æ§æ¨¡å‹åœ¨å®é™…ä½¿ç”¨ä¸­çš„è¡¨ç°ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜ã€‚</li>
<li>å®šæœŸæ›´æ–°ï¼šæ ¹æ®æ–°æ•°æ®å’Œæ–°éœ€æ±‚ï¼Œå®šæœŸæ›´æ–°å’Œé‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œä¿æŒæ¨¡å‹æ€§èƒ½ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>æ¨¡å‹è½»é‡åŒ–éƒ¨ç½²</category>
      </categories>
      <tags>
        <tag>åµŒå…¥å¼ai</tag>
        <tag>esp32</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‹åŠ¿è¯†åˆ«æ¨¡å‹éƒ¨ç½²åœ¨esp32s3ï¼ˆäºŒï¼‰</title>
    <url>/2024/09/17/%E6%89%8B%E5%8A%BF%E8%AF%86%E5%88%AB%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2%E5%9C%A8esp32s3%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1>æ‰‹åŠ¿è¯†åˆ«æ¨¡å‹</h1>
<h2 id="1-æ•°æ®">1. æ•°æ®</h2>
<h3 id="1-1-æ ‡æ³¨">1.1 æ ‡æ³¨</h3>
<blockquote>
<p>ç”¨äºè¯†åˆ«åŸå§‹æ•°æ®ï¼ˆå›¾ç‰‡ã€æ–‡æœ¬æ–‡ä»¶ã€è§†é¢‘ç­‰ï¼‰å¹¶æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰æ„ä¹‰çš„ä¿¡æ¯æ ‡ç­¾ä»¥æä¾›ä¸Šä¸‹æ–‡ï¼Œä»è€Œä½¿æœºå™¨å­¦ä¹ æ¨¡å‹èƒ½å¤Ÿä»ä¸­å­¦ä¹ <br>
<strong>æ¯å¼ å›¾ç‰‡ç”Ÿæˆå¯¹åº”æ ‡ç­¾æ–‡ä»¶</strong><br>
æ ‡ç­¾æ–‡ä»¶ä»…å«æœ‰ä¸€ä¸ªè¡¨ç¤ºæ‰‹åŠ¿ç§ç±»çš„æ ‡ç­¾<br>
å¤šä¸ªæ ‡ç­¾å¯èƒ½å¯¼è‡´è®­ç»ƒè¿‡ç¨‹ä¸­æ ‡ç­¾æ–‡ä»¶è¯»å–é”™è¯¯ï¼Œä¹Ÿå¯ä»¥å¤„ç†åªè¯»å–æ‰‹åŠ¿ç±»åˆ«çš„æ ‡ç­¾</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰‹åŠ¿ä¸æ ‡ç­¾çš„æ˜ å°„</span></span><br><span class="line">class_mapping = &#123;</span><br><span class="line">    <span class="string">&#x27;01_palm&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;02_l&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;03_fist&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;04_fist_moved&#x27;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">&#x27;05_thumb&#x27;</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="string">&#x27;06_index&#x27;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">&#x27;07_ok&#x27;</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="string">&#x27;08_palm_moved&#x27;</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="string">&#x27;09_c&#x27;</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="string">&#x27;10_down&#x27;</span>: <span class="number">9</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data_path = <span class="string">&#x27;leapGestRecog&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#éå†å›¾ç‰‡ï¼Œæ ¹æ®æ–‡ä»¶å¤¹åç§°å¯¹åº”æ‰‹åŠ¿ç§ç±»ï¼Œæ ‡æ³¨å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">for</span> group <span class="keyword">in</span> os.listdir(data_path):</span><br><span class="line">    group_path = os.path.join(data_path, group)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(group_path):</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> gesture <span class="keyword">in</span> os.listdir(group_path):</span><br><span class="line">        gesture_path = os.path.join(group_path, gesture)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(gesture_path):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> gesture <span class="keyword">not</span> <span class="keyword">in</span> class_mapping:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        class_id = class_mapping[gesture]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> img_file <span class="keyword">in</span> os.listdir(gesture_path):</span><br><span class="line">            <span class="keyword">if</span> img_file.endswith(<span class="string">&#x27;.png&#x27;</span>):</span><br><span class="line">                img_path = os.path.join(gesture_path, img_file)</span><br><span class="line">                label_file = img_path.replace(<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">with</span> <span class="built_in">open</span>(label_file, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                    f.write(<span class="string">f&quot;<span class="subst">&#123;class_id&#125;</span>\n&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ ‡ç­¾æ–‡ä»¶æ›´æ–°å®Œæˆã€‚&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="1-2-åˆ’åˆ†æ•°æ®é›†">1.2 åˆ’åˆ†æ•°æ®é›†</h3>
<p>è¿™é‡Œåˆ’åˆ†äº†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œæ ¡å‡†é›†ä»è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸­éšæœºæŠ½å–</p>
<blockquote>
<p>åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line">data_path = <span class="string">&#x27;leapGestRecog&#x27;</span></span><br><span class="line"><span class="comment">#åˆ’åˆ†æ¯”ä¾‹8ï¼š2</span></span><br><span class="line">train_ratio = <span class="number">0.8</span></span><br><span class="line">test_ratio = <span class="number">0.2</span></span><br><span class="line"></span><br><span class="line">train_data_path = <span class="string">&#x27;dataset/train&#x27;</span></span><br><span class="line">test_data_path = <span class="string">&#x27;dataset/test&#x27;</span></span><br><span class="line"></span><br><span class="line">os.makedirs(train_data_path, exist_ok=<span class="literal">True</span>)</span><br><span class="line">os.makedirs(test_data_path, exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">split_data</span>(<span class="params">class_dir, dest_train_dir, dest_test_dir</span>):</span><br><span class="line">    files = [f <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(class_dir) <span class="keyword">if</span> f.endswith(<span class="string">&#x27;.png&#x27;</span>)]</span><br><span class="line">    labels = [f.replace(<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>) <span class="keyword">for</span> f <span class="keyword">in</span> files]</span><br><span class="line">    </span><br><span class="line">    train_files, test_files = train_test_split(files, test_size=test_ratio, random_state=<span class="number">42</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> train_files:</span><br><span class="line">        <span class="comment">#åŸå›¾ç‰‡ï¼Œæ ‡ç­¾æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶ä½ç½®</span></span><br><span class="line">        src_img = os.path.join(class_dir, file)</span><br><span class="line">        src_label = os.path.join(class_dir, file.replace(<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>))</span><br><span class="line">        </span><br><span class="line">        dst_img = os.path.join(dest_train_dir, file)</span><br><span class="line">        dst_label = os.path.join(dest_train_dir, file.replace(<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>))</span><br><span class="line">        </span><br><span class="line">        shutil.copy(src_img, dst_img)</span><br><span class="line">        shutil.copy(src_label, dst_label)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> test_files:</span><br><span class="line">        src_img = os.path.join(class_dir, file)</span><br><span class="line">        src_label = os.path.join(class_dir, file.replace(<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>))</span><br><span class="line">        </span><br><span class="line">        dst_img = os.path.join(dest_test_dir, file)</span><br><span class="line">        dst_label = os.path.join(dest_test_dir, file.replace(<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>))</span><br><span class="line">        </span><br><span class="line">        shutil.copy(src_img, dst_img)</span><br><span class="line">        shutil.copy(src_label, dst_label)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> group <span class="keyword">in</span> os.listdir(data_path):</span><br><span class="line">    group_path = os.path.join(data_path, group)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(group_path):</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> gesture <span class="keyword">in</span> os.listdir(group_path):</span><br><span class="line">        gesture_path = os.path.join(group_path, gesture)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(gesture_path):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        dest_train_dir = os.path.join(train_data_path, group, gesture)</span><br><span class="line">        dest_test_dir = os.path.join(test_data_path, group, gesture)</span><br><span class="line">        os.makedirs(dest_train_dir, exist_ok=<span class="literal">True</span>)</span><br><span class="line">        os.makedirs(dest_test_dir, exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#æ¯ä¸€ç»„çš„æ¯ç§æ‰‹åŠ¿éƒ½æŒ‰ç…§æ¯”ä¾‹åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span></span><br><span class="line">        split_data(gesture_path, dest_train_dir, dest_test_dir)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ•°æ®é›†åˆ’åˆ†å®Œæˆï¼&quot;</span>)</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>åˆ’åˆ†æ ¡å‡†é›†å¹¶å­˜å‚¨ä¸º.pklæ–‡ä»¶</p>
</blockquote>
<blockquote>
<p>ç”±äºåç»­é‡åŒ–å‚è€ƒæ•™ç¨‹åˆ’åˆ†æ ¡å‡†æ•°æ®é›†ï¼Œä¿å­˜ä¸º.pklï¼Œå…¶å®å¯ä»¥ç›´æ¥åˆ’åˆ†å‡ºæ ¡å‡†æ•°æ®é›†ï¼Œä¿å­˜åˆ°dataset/imageç›®å½•ï¼Œåç»­å¯¹æ ¡å‡†æ•°æ®é›†çš„é¢„å¤„ç†ä¹Ÿè¾ƒä¸ºæ–¹ä¾¿</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line">train_data_path = <span class="string">&#x27;dataset/train&#x27;</span></span><br><span class="line">test_data_path = <span class="string">&#x27;dataset/test&#x27;</span></span><br><span class="line">calib_data_path = <span class="string">&#x27;dataset/calib&#x27;</span></span><br><span class="line"></span><br><span class="line">os.makedirs(calib_data_path, exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_files_from_dir</span>(<span class="params">data_path</span>):</span><br><span class="line">    files = []</span><br><span class="line">    <span class="keyword">for</span> group <span class="keyword">in</span> os.listdir(data_path):</span><br><span class="line">        group_path = os.path.join(data_path, group)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(group_path):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> gesture <span class="keyword">in</span> os.listdir(group_path):</span><br><span class="line">            gesture_path = os.path.join(group_path, gesture)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(gesture_path):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> file <span class="keyword">in</span> os.listdir(gesture_path):</span><br><span class="line">                <span class="keyword">if</span> file.endswith(<span class="string">&#x27;.png&#x27;</span>):</span><br><span class="line">                    img_path = os.path.join(gesture_path, file)</span><br><span class="line">                    label_path = os.path.join(gesture_path, file.replace(<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>))</span><br><span class="line">                    <span class="comment">#å°†æ¯ä¸ªå›¾åƒæ–‡ä»¶è·¯å¾„å’Œå¯¹åº”çš„æ ‡ç­¾æ–‡ä»¶è·¯å¾„ä½œä¸ºä¸€ä¸ªå…ƒç»„ (img_path, label_path)ï¼Œå¹¶å°†è¿™ä¸ªå…ƒç»„æ·»åŠ åˆ° files åˆ—è¡¨ä¸­</span></span><br><span class="line">                    files.append((img_path, label_path))</span><br><span class="line">    <span class="keyword">return</span> files</span><br><span class="line"></span><br><span class="line">train_files = get_files_from_dir(train_data_path)</span><br><span class="line">test_files = get_files_from_dir(test_data_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾å®šæå–æ¯”ä¾‹</span></span><br><span class="line">ts = <span class="number">0.3</span>  <span class="comment"># ä»è®­ç»ƒé›†ä¸­å’Œæµ‹è¯•é›†ä¸­å„æå– 30% çš„æ•°æ®ä½œä¸ºæ ¡å‡†é›†çš„ä¸€éƒ¨åˆ†</span></span><br><span class="line"></span><br><span class="line">_, calib_train_files = train_test_split(train_files, test_size=ts, random_state=<span class="number">42</span>)</span><br><span class="line">_, calib_test_files = train_test_split(test_files, test_size=ts, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶æ ¡å‡†æ•°æ®é›†</span></span><br><span class="line">calib_files = calib_train_files + calib_test_files</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ ¡å‡†æ•°æ®é›†å¤åˆ¶åˆ°æ–°çš„ç›®å½•</span></span><br><span class="line"><span class="keyword">for</span> img_path, label_path <span class="keyword">in</span> calib_files:</span><br><span class="line">    calib_img_path = img_path.replace(<span class="string">&#x27;dataset/train&#x27;</span>, <span class="string">&#x27;dataset/calib&#x27;</span>).replace(<span class="string">&#x27;dataset/test&#x27;</span>, <span class="string">&#x27;dataset/calib&#x27;</span>)</span><br><span class="line">    calib_label_path = label_path.replace(<span class="string">&#x27;dataset/train&#x27;</span>, <span class="string">&#x27;dataset/calib&#x27;</span>).replace(<span class="string">&#x27;dataset/test&#x27;</span>, <span class="string">&#x27;dataset/calib&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    os.makedirs(os.path.dirname(calib_img_path), exist_ok=<span class="literal">True</span>)</span><br><span class="line">    os.makedirs(os.path.dirname(calib_label_path), exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    shutil.copy(img_path, calib_img_path)</span><br><span class="line">    shutil.copy(label_path, calib_label_path)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ ¡å‡†æ•°æ®é›†æå–å®Œæˆï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜æ ¡å‡†æ•°æ®é›†ä¸º.pklæ–‡ä»¶</span></span><br><span class="line">calib_images = []</span><br><span class="line">calib_labels = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> img_path, label_path <span class="keyword">in</span> calib_files:</span><br><span class="line">    <span class="comment">#ä½¿ç”¨äºŒè¿›åˆ¶æ¨¡å¼ (&#x27;rb&#x27;) æ‰“å¼€æ–‡ä»¶å¹¶è¯»å–å…¶å†…å®¹ï¼Œå°†å…¶ä½œä¸ºå­—èŠ‚æµæ•°æ®æ·»åŠ åˆ° calib_images åˆ—è¡¨ä¸­ã€‚</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(img_path, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        calib_images.append(f.read())  <span class="comment">#åŠ è½½å›¾ç‰‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(label_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        calib_labels.append(f.read())  </span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥äºŒè¿›åˆ¶å†™æ¨¡å¼ (&#x27;wb&#x27;) æ‰“å¼€ï¼ˆæˆ–åˆ›å»ºï¼‰ä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;X_cal.pkl&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="comment">#å°† calib_images åˆ—è¡¨åºåˆ—åŒ–å¹¶å†™å…¥æ–‡ä»¶ f</span></span><br><span class="line">    pickle.dump(calib_images, f)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;y_cal.pkl&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    pickle.dump(calib_labels, f)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ ¡å‡†æ•°æ®é›†å·²ä¿å­˜ä¸º.pklæ–‡ä»¶ï¼&quot;</span>)</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>æŸ¥é˜….pklæ–‡ä»¶<br>
<strong>åºåˆ—åŒ–æ•°æ®</strong>ï¼š.pkl æ–‡ä»¶ä½¿ç”¨ Python çš„ pickle æ¨¡å—ä¿å­˜ï¼Œpickle å¯ä»¥å°† Python å¯¹è±¡åºåˆ—åŒ–ä¸ºå­—èŠ‚æµï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿åœ°å°†æ•°æ®å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å­—å…¸ã€NumPy æ•°ç»„ç­‰ï¼‰å­˜å‚¨åˆ°æ–‡ä»¶ä¸­ã€‚<br>
<strong>å¿«é€ŸåŠ è½½</strong>ï¼šç›¸è¾ƒäºåŸå§‹çš„æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚æ–‡æœ¬æ–‡ä»¶æˆ–å›¾åƒæ–‡ä»¶ï¼‰ï¼Œpickle å¯ä»¥æ›´å¿«åœ°åŠ è½½æ•°æ®ï¼Œå› ä¸ºå®ƒæ˜¯ç›´æ¥å°†äºŒè¿›åˆ¶æ•°æ®åŠ è½½å›å†…å­˜ï¼Œè€Œä¸éœ€è¦è¿›è¡Œæ–‡æœ¬è§£ææˆ–å›¾åƒè§£ç ã€‚<br>
<strong>ä¿å­˜å¤æ‚æ•°æ®ç»“æ„</strong>ï¼špickle å¯ä»¥ç›´æ¥ä¿å­˜å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚åŒ…å«å¤šç§ç±»å‹çš„ Python å¯¹è±¡çš„åˆ—è¡¨æˆ–å­—å…¸ï¼Œè€Œä¸éœ€è¦è¿›è¡Œç‰¹æ®Šçš„è½¬æ¢ã€‚<br>
<strong>ä¾¿äºåç»­ä½¿ç”¨</strong>ï¼šæœºå™¨å­¦ä¹ å’Œæ•°æ®ç§‘å­¦ä¸­çš„å¾ˆå¤šå·¥ä½œæµéœ€è¦é¢‘ç¹åŠ è½½å’Œä¿å­˜æ•°æ®é›†ï¼Œä½¿ç”¨ .pkl æ–‡ä»¶æ ¼å¼å¯ä»¥æ›´é«˜æ•ˆåœ°ä¿å­˜æ•°æ®å¯¹è±¡çš„çŠ¶æ€ï¼Œå¹¶åœ¨ä»¥åä½¿ç”¨æ—¶æ–¹ä¾¿åœ°åŠ è½½ã€‚</p>
</blockquote>
<h3 id="1-3-æ•°æ®é¢„å¤„ç†ï¼ˆåŒ…å«åœ¨æ¨¡å‹è®­ç»ƒè„šæœ¬ä¸­ï¼‰">1.3 æ•°æ®é¢„å¤„ç†ï¼ˆåŒ…å«åœ¨æ¨¡å‹è®­ç»ƒè„šæœ¬ä¸­ï¼‰</h3>
]]></content>
      <categories>
        <category>æ¨¡å‹è½»é‡åŒ–éƒ¨ç½²</category>
      </categories>
      <tags>
        <tag>åµŒå…¥å¼ai</tag>
        <tag>esp32</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‹åŠ¿è¯†åˆ«æ¨¡å‹éƒ¨ç½²åœ¨esp32s3ï¼ˆä¸‰ï¼‰</title>
    <url>/2024/09/17/%E6%89%8B%E5%8A%BF%E8%AF%86%E5%88%AB%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2%E5%9C%A8esp32s3%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h1>æ‰‹åŠ¿è¯†åˆ«æ¨¡å‹</h1>
<h2 id="2-æ¨¡å‹é€‰æ‹©ä¸è®¾è®¡">2. æ¨¡å‹é€‰æ‹©ä¸è®¾è®¡</h2>
<h3 id="æŸ¥é˜…ä¿¡æ¯">æŸ¥é˜…ä¿¡æ¯</h3>
<h4 id="1-å‡ ä¸ªæ‰‹åŠ¿è¯†åˆ«æ¨¡å‹">1. å‡ ä¸ªæ‰‹åŠ¿è¯†åˆ«æ¨¡å‹</h4>
<p>ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„æ‰‹åŠ¿è¯†åˆ«æ¨¡å‹ï¼š</p>
<ol>
<li>ä¼ ç»Ÿæ–¹æ³•</li>
</ol>
<ul>
<li>HOG + SVMï¼šHistogram of Oriented Gradients (HOG) ç‰¹å¾æå–æ–¹æ³•ä¸æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰åˆ†ç±»å™¨ç»“åˆã€‚</li>
<li>Haar-like ç‰¹å¾ + AdaBoostï¼šä½¿ç”¨ Haar-like ç‰¹å¾è¿›è¡Œç‰¹å¾æå–ï¼Œç„¶åé€šè¿‡ AdaBoost ç®—æ³•è¿›è¡Œåˆ†ç±»ã€‚</li>
</ul>
<ol start="2">
<li>æ·±åº¦å­¦ä¹ æ–¹æ³•</li>
</ol>
<ul>
<li>å·ç§¯ç¥ç»ç½‘ç»œ (CNN)ï¼šä¾‹å¦‚LeNet, AlexNet, VGG, ResNetç­‰ï¼Œç”¨äºç‰¹å¾æå–å’Œåˆ†ç±»ã€‚</li>
<li>åŒºåŸŸå·ç§¯ç¥ç»ç½‘ç»œ (R-CNN)ï¼šå¦‚ Faster R-CNNã€Mask R-CNNï¼Œç”¨äºç›®æ ‡æ£€æµ‹ã€‚</li>
<li>YOLO (You Only Look Once)ï¼šYOLOv3, YOLOv4, YOLOv5, YOLOv8ç­‰ï¼Œç”¨äºå®æ—¶ç›®æ ‡æ£€æµ‹å’Œè¯†åˆ«ã€‚</li>
<li>SSD (Single Shot MultiBox Detector)ï¼šç”¨äºå®æ—¶ç›®æ ‡æ£€æµ‹ã€‚</li>
<li>MobileNetï¼šè½»é‡çº§å·ç§¯ç¥ç»ç½‘ç»œï¼Œé€‚ç”¨äºç§»åŠ¨è®¾å¤‡ã€‚</li>
<li>OpenPoseï¼šç”¨äºäººä½“å…³é”®ç‚¹æ£€æµ‹çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</li>
</ul>
<h4 id="2-é€‚åˆéƒ¨ç½²åœ¨ç¡¬ä»¶ä¸Šçš„æ¨¡å‹">2. é€‚åˆéƒ¨ç½²åœ¨ç¡¬ä»¶ä¸Šçš„æ¨¡å‹</h4>
<p>åœ¨ç¡¬ä»¶ä¸Šéƒ¨ç½²æ¨¡å‹æ—¶ï¼Œéœ€è¦è€ƒè™‘æ¨¡å‹çš„è®¡ç®—å¤æ‚åº¦ã€å†…å­˜éœ€æ±‚ä»¥åŠæ¨ç†é€Ÿåº¦ã€‚ä»¥ä¸‹æ˜¯å‡ ç§é€‚åˆéƒ¨ç½²åœ¨ç¡¬ä»¶ä¸Šçš„è½»é‡çº§æ¨¡å‹ï¼š</p>
<ul>
<li>MobileNetï¼šç‰¹åˆ«è®¾è®¡ç”¨äºç§»åŠ¨å’ŒåµŒå…¥å¼è®¾å¤‡ï¼Œè®¡ç®—æ•ˆç‡é«˜ã€‚</li>
<li>YOLOv5/YOLOv8ï¼šå…¶ä¸­çš„è½»é‡çº§ç‰ˆæœ¬ï¼ˆå¦‚YOLOv5s/YOLOv8sï¼‰åœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šè¡¨ç°è‰¯å¥½ã€‚</li>
<li>Tiny-YOLOï¼šYOLOçš„ç²¾ç®€ç‰ˆæœ¬ï¼Œé€‚åˆèµ„æºå—é™çš„è®¾å¤‡ã€‚</li>
<li>SqueezeNetï¼šä¸€ç§å°å‹åŒ–çš„CNNï¼Œå‡å°‘å‚æ•°é‡å’Œè®¡ç®—é‡ã€‚</li>
<li>EfficientNet-Liteï¼šEfficientNetçš„è½»é‡çº§ç‰ˆæœ¬ï¼Œä¸“ä¸ºç§»åŠ¨è®¾å¤‡ä¼˜åŒ–ã€‚</li>
</ul>
<h4 id="3-éƒ¨ç½²åˆ°ç¡¬ä»¶ä¸Šçš„éš¾ç‚¹">3. éƒ¨ç½²åˆ°ç¡¬ä»¶ä¸Šçš„éš¾ç‚¹</h4>
<ul>
<li>è®¡ç®—èµ„æºæœ‰é™ï¼šåµŒå…¥å¼è®¾å¤‡é€šå¸¸è®¡ç®—èƒ½åŠ›å’Œå†…å­˜æœ‰é™ï¼Œéœ€è¦ä¼˜åŒ–æ¨¡å‹çš„å¤§å°å’Œè®¡ç®—å¤æ‚åº¦ã€‚</li>
<li>åŠŸè€—é™åˆ¶ï¼šç§»åŠ¨è®¾å¤‡çš„ç”µæ± å¯¿å‘½æ˜¯ä¸€ä¸ªé‡è¦è€ƒè™‘å› ç´ ï¼Œé«˜æ•ˆçš„æ¨¡å‹è®¾è®¡å’Œè®¡ç®—æ–¹æ³•æ˜¯å¿…è¦çš„ã€‚</li>
<li>å®æ—¶æ€§è¦æ±‚ï¼šæ‰‹åŠ¿è¯†åˆ«é€šå¸¸éœ€è¦å®æ—¶å¤„ç†ï¼Œæ¨¡å‹éœ€è¦å…·å¤‡å¿«é€Ÿæ¨ç†èƒ½åŠ›ã€‚</li>
<li>ç¡¬ä»¶å…¼å®¹æ€§ï¼šä¸åŒçš„ç¡¬ä»¶å¹³å°ï¼ˆå¦‚NVIDIA Jetson, Raspberry Pi, FPGA, DSPç­‰ï¼‰å¯¹æ¨¡å‹ä¼˜åŒ–å’Œéƒ¨ç½²æœ‰ä¸åŒçš„è¦æ±‚ã€‚</li>
<li>è½¯ä»¶æ”¯æŒï¼šéœ€è¦åˆé€‚çš„è½¯ä»¶æ¡†æ¶å’Œå·¥å…·é“¾ï¼ˆå¦‚TensorFlow Lite, ONNX Runtime, OpenVINOç­‰ï¼‰æ¥æ”¯æŒæ¨¡å‹éƒ¨ç½²å’Œæ¨ç†ã€‚</li>
</ul>
<h4 id="éƒ¨ç½²ä¼˜åŒ–æŠ€å·§">éƒ¨ç½²ä¼˜åŒ–æŠ€å·§</h4>
<ul>
<li>æ¨¡å‹å‰ªæå’Œé‡åŒ–ï¼šå‡å°‘æ¨¡å‹å‚æ•°å’Œè®¡ç®—é‡ï¼Œæå‡æ¨ç†é€Ÿåº¦ã€‚</li>
<li>ç¡¬ä»¶åŠ é€Ÿï¼šåˆ©ç”¨ç¡¬ä»¶çš„åŠ é€Ÿèƒ½åŠ›ï¼Œå¦‚GPU, NPU, TPUç­‰ã€‚</li>
<li>æ··åˆç²¾åº¦è®¡ç®—ï¼šä½¿ç”¨FP16æˆ–INT8è®¡ç®—ä»£æ›¿FP32ï¼Œæé«˜è®¡ç®—æ•ˆç‡ã€‚</li>
<li>è¾“å…¥åˆ†è¾¨ç‡è°ƒæ•´ï¼šæ ¹æ®åº”ç”¨åœºæ™¯é€‚å½“é™ä½è¾“å…¥åˆ†è¾¨ç‡ï¼Œå‡å°‘è®¡ç®—è´Ÿè·</li>
</ul>
<h3 id="cnnæ¨¡å‹">cnnæ¨¡å‹</h3>
<h4 id="HandGestureCNN-ç±»">HandGestureCNN ç±»</h4>
<ul>
<li>[] <strong>æ„é€ åˆå§‹åŒ–æ¨¡å‹æ¶æ„å’Œä¼˜åŒ–å™¨ï¼Œå®šä¹‰æŸå¤±å‡½æ•°</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,learning_rate=<span class="number">0.001</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(HandGestureCNN,<span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.model1=Sequential(</span><br><span class="line">            Conv2d(<span class="number">1</span>,<span class="number">32</span>,<span class="number">5</span>),</span><br><span class="line">            ReLU(),</span><br><span class="line">            MaxPool2d(<span class="number">2</span>),</span><br><span class="line">            Dropout(<span class="number">0.2</span>),</span><br><span class="line">            Conv2d(<span class="number">32</span>,<span class="number">64</span>,<span class="number">3</span>),</span><br><span class="line">            ReLU(),</span><br><span class="line">            MaxPool2d(<span class="number">2</span>),</span><br><span class="line">            Dropout(<span class="number">0.2</span>),</span><br><span class="line">            Conv2d(<span class="number">64</span>,<span class="number">64</span>,<span class="number">3</span>),</span><br><span class="line">            ReLU(),</span><br><span class="line">            MaxPool2d(<span class="number">2</span>),</span><br><span class="line">            Flatten(),</span><br><span class="line">            Linear(<span class="number">64</span>*<span class="number">10</span>*<span class="number">10</span>, <span class="number">128</span>), </span><br><span class="line">            ReLU(),</span><br><span class="line">            Linear(<span class="number">128</span>,<span class="number">10</span>),</span><br><span class="line">            Softmax(dim=<span class="number">1</span>)</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.loss_fn=CrossEntropyLoss()</span><br><span class="line">        <span class="variable language_">self</span>.optimizer=torch.optim.Adam(<span class="variable language_">self</span>.parameters(),lr=learning_rate)</span><br><span class="line">        </span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = <span class="variable language_">self</span>.model1(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<ul>
<li>[] ä¿å­˜ï¼ŒåŠ è½½æ¨¡å‹æ£€æŸ¥ç‚¹ï¼ˆå¯é€‰ï¼‰</li>
</ul>
<blockquote>
<p>åˆšå¼€å§‹è¿›è¡Œæ¨¡å‹è®­ç»ƒï¼Œæƒ³æ³•æ˜¯æ¯æ¬¡è®­ç»ƒè¾ƒå°‘è½®æ•°ï¼Œè®­ç»ƒç»“æŸåä¿å­˜æ¨¡å‹æ£€æŸ¥ç‚¹ï¼ˆåŒ…æ‹¬å½“å‰epochæ•°ã€æ¨¡å‹çŠ¶æ€å­—å…¸ä»¥åŠä¼˜åŒ–å™¨çŠ¶æ€å­—å…¸ï¼‰ï¼Œä¸‹ä¸€æ¬¡è®­ç»ƒåŠ è½½æ¨¡å‹çš„æ£€æŸ¥ç‚¹ï¼Œå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ¢å¤æ¨¡å‹å’Œä¼˜åŒ–å™¨çš„çŠ¶æ€ï¼Œå¹¶è¿”å›ä¸Šæ¬¡ä¿å­˜çš„epochæ•°åŠ 1ï¼›å¦åˆ™è¿”å›0ã€‚<br>
è¿™æ ·å°±å¯ä»¥<strong>åœ¨å‰ä¸€æ¬¡è®­ç»ƒçš„åŸºç¡€ä¸Šç»§ç»­è®­ç»ƒ</strong><br>
<strong>ä½†æ˜¯</strong> ä½¿ç”¨æ—©åœæœºåˆ¶æ›´ä¸ºæ–¹ä¾¿ï¼Œå¹¶ä¸”å¯ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆ</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">save_checkpoint</span>(<span class="params">self, epoch, path=<span class="string">&#x27;checkpoint.pth&#x27;</span></span>):</span><br><span class="line">    torch.save(&#123;</span><br><span class="line">        <span class="string">&#x27;epoch&#x27;</span>: epoch,</span><br><span class="line">        <span class="string">&#x27;model_state_dict&#x27;</span>: <span class="variable language_">self</span>.state_dict(),</span><br><span class="line">        <span class="string">&#x27;optimizer_state_dict&#x27;</span>: <span class="variable language_">self</span>.optimizer.state_dict()</span><br><span class="line">    &#125;, path)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_checkpoint</span>(<span class="params">self, path=<span class="string">&#x27;checkpoint.pth&#x27;</span></span>):</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(path):</span><br><span class="line">        checkpoint = torch.load(path)</span><br><span class="line">        <span class="variable language_">self</span>.load_state_dict(checkpoint[<span class="string">&#x27;model_state_dict&#x27;</span>])</span><br><span class="line">        <span class="variable language_">self</span>.optimizer.load_state_dict(checkpoint[<span class="string">&#x27;optimizer_state_dict&#x27;</span>])</span><br><span class="line">        <span class="keyword">return</span> checkpoint[<span class="string">&#x27;epoch&#x27;</span>] + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h4 id="EarlyStopping-ç±»">EarlyStopping ç±»</h4>
<p>å®ç°æ—©åœæœºåˆ¶</p>
<ul>
<li>[] <strong>åˆå§‹åŒ–æ—©åœæœºåˆ¶å‚æ•°</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, patience=<span class="number">5</span>, delta=<span class="number">0</span></span>):</span><br><span class="line">    <span class="variable language_">self</span>.patience = patience</span><br><span class="line">    <span class="variable language_">self</span>.delta = delta</span><br><span class="line">    <span class="variable language_">self</span>.best_score = <span class="literal">None</span></span><br><span class="line">    <span class="variable language_">self</span>.counter = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">self</span>.early_stop = <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<ul>
<li>[] <strong>æ¯”è¾ƒå½“å‰çš„éªŒè¯æŸå¤±</strong><br>
val_loss å’Œå†å²æœ€ä½³æŸå¤±ï¼Œå¦‚æœå½“å‰æŸå¤±ä¼˜äºå†å²æœ€ä½³æŸå¤±ï¼Œåˆ™æ›´æ–° best_score å¹¶é‡ç½®è®¡æ•°å™¨ counterï¼ŒåŒæ—¶ä¿å­˜å½“å‰æ¨¡å‹çŠ¶æ€ï¼›å¦‚æœå½“å‰æŸå¤±æ²¡æœ‰æ”¹è¿›ï¼Œåˆ™å¢åŠ è®¡æ•°å™¨ counterã€‚å¦‚æœè®¡æ•°å™¨è¾¾åˆ° patienceï¼Œåˆ™è®¾ç½® early_stop æ ‡å¿—ä¸ºçœŸï¼Œè¡¨ç¤ºåº”è¯¥åœæ­¢è®­ç»ƒã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, val_loss, model</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="variable language_">self</span>.best_score <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="variable language_">self</span>.best_score = val_loss</span><br><span class="line">    <span class="keyword">elif</span> val_loss &lt; <span class="variable language_">self</span>.best_score - <span class="variable language_">self</span>.delta:</span><br><span class="line">        <span class="variable language_">self</span>.best_score = val_loss</span><br><span class="line">        <span class="variable language_">self</span>.counter = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        torch.save(model.state_dict(), <span class="string">&#x27;best_model.pth&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="variable language_">self</span>.counter += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.counter &gt;= <span class="variable language_">self</span>.patience:</span><br><span class="line">            <span class="variable language_">self</span>.early_stop = <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h3 id="yolov8n">yolov8n</h3>
<blockquote>
<p>yolov8nå’Œyolov5nè¿›è¡Œäº†å°è¯•ï¼Œä½†æ˜¯åœ¨éƒ¨ç½²é˜¶æ®µï¼Œç”±äºæ¨¡å‹è¾ƒä¸ºå¤æ‚ï¼Œå¾ˆå¤šç½‘ç»œå±‚espdlä¸æ”¯æŒ<br>
å¯èƒ½éœ€è¦é‡æ–°å®šä¹‰æ¨¡å‹<br>
ä½†æ˜¯æ¨¡å‹éƒ¨ç½²å‰çš„è®­ç»ƒéƒ½å·²å®Œæˆï¼Œå¹¶ä¸”è¯†åˆ«å‡†ç¡®ç‡å¾ˆé«˜<br>
è¿™éƒ¨åˆ†çš„æ–‡æ¡£åç»­è¡¥å……ï¼Œä»£ç å·²ç»ä¸Šä¼ ã€‚ã€‚æœŸå¾…åé¢çš„æ›´æ–°ã€‚ã€‚ã€‚<br>
ä¹ŸæœŸå¾…æ‚¨æå‡ºå»ºè®®ï¼ï¼</p>
</blockquote>
<h4 id="æ•°æ®æ ‡æ³¨">æ•°æ®æ ‡æ³¨</h4>
<ol>
<li>YOLOçš„æ ‡ç­¾æ–‡ä»¶éœ€è¦æ¯ä¸€è¡ŒåŒ…å«å¦‚ä¸‹ä¿¡æ¯ï¼š<br>
&lt;class_id&gt; &lt;x_center&gt; &lt;y_center&gt; <width> <height></li>
</ol>
<ul>
<li>&lt;class_id&gt;ï¼šç±»åˆ«IDï¼Œä»0å¼€å§‹ã€‚</li>
<li>&lt;x_center&gt;ï¼šç›®æ ‡è¾¹ç•Œæ¡†ä¸­å¿ƒç‚¹çš„xåæ ‡ï¼Œç›¸å¯¹äºå›¾ç‰‡å®½åº¦çš„æ¯”ä¾‹ã€‚</li>
<li>&lt;y_center&gt;ï¼šç›®æ ‡è¾¹ç•Œæ¡†ä¸­å¿ƒç‚¹çš„yåæ ‡ï¼Œç›¸å¯¹äºå›¾ç‰‡é«˜åº¦çš„æ¯”ä¾‹ã€‚</li>
<li><width>ï¼šç›®æ ‡è¾¹ç•Œæ¡†çš„å®½åº¦ï¼Œç›¸å¯¹äºå›¾ç‰‡å®½åº¦çš„æ¯”ä¾‹ã€‚</li>
<li><height>ï¼šç›®æ ‡è¾¹ç•Œæ¡†çš„é«˜åº¦ï¼Œç›¸å¯¹äºå›¾ç‰‡é«˜åº¦çš„æ¯”ä¾‹ã€‚</li>
</ul>
<ol start="2">
<li>æ•°æ®é›†å›¾ç‰‡å·²ç»åˆ†ç±»åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”ä½ æœ‰ä¸€ä¸ªç±»ååˆ°IDçš„æ˜ å°„ï¼ˆä¾‹å¦‚ï¼š01_palm -&gt; 0, 10_down -&gt; 9ï¼‰ï¼Œéœ€è¦ç¼–å†™ä¸€ä¸ªè„šæœ¬æ¥ç”ŸæˆYOLOæ ¼å¼çš„æ ‡ç­¾æ–‡ä»¶ã€‚</li>
<li>githubä¸Šä¸‹è½½æ¨¡å‹ï¼Œå®‰è£…ä¾èµ–</li>
</ol>
<h3 id="yolov5n">yolov5n</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd D:/Projects/HandRecog/yolov5</span><br><span class="line">python train.py --img 320 --epochs 1 --data ../dataset/data.yaml --weights yolov5n.pt --batch-size 4 --patience 5 --hyp D:/Projects/HandRecog/yolov5/data/hyps/hyp.scratch-low.yaml --project D:/Projects/HandRecog --name runs</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¨¡å‹è½»é‡åŒ–éƒ¨ç½²</category>
      </categories>
      <tags>
        <tag>åµŒå…¥å¼ai</tag>
        <tag>esp32</tag>
      </tags>
  </entry>
</search>
